---
layout: post
title:  "关于数组的指针用法的一点个人见解"
date:   2018-11-18 00:40:00
categories: C语言
tags: 指针 数组 c
excerpt: 数组的指针
mathjax: true
---

今天某位同学问我一个问题，她说，有一个 `char` 型的二维数组用来存储字符串，声明为 `char a[100][100];` ,而在使用该二维数组读字符串时仅使用了一个数组下标： `a[i]` ，为什么可以这样使用二维数组？首先，给出她的程序源码：

```c
#include <stdio.h>
#include <string.h>

int main(void)
{
  char a[100][100];    //此处a声明为100*100的二维数组
  char b[]={"***end***"};
  int c[100],i,j,max=0,maxj;

  for(i = 0;i < 100;i++)
  {
    gets(a[i]); //此处二维数组a只使用了一个下标
    if(strcmp(a[i],b) == 0) break;
    else c[i] = strlen(a[i]);
  }

  ...

  return 0;
}
```

可见，上述程序中，在 `gets` 函数中，参数仅使用了二维数组的一个下标。至此，我已经有了一个猜想： `gets` 函数的参数是一个指针，而众所周知，数组实际上就是指针操作，那么，对于二维数组而言，会不会是给出两个下标时是对应的数组元素的值，而只给一个下标时，却是那一行第一个元素的地址？

为此，我查询了 `gets` 函数的函数原型，发现 `gets` 函数原型如下：
`char *gets(char *s);`
果然，`a[i]` 是一个指针，那么，是不是对所有类型的数组都成立呢？为此，我做了几个实验：

实验一：使用`printf`函数直接输出：
```c
#include <stdio.h>

int main(void)
{
    int a[100][100]={0};
    printf("%d\n",a[5]);
    printf("%d\n",&a[5][0]);
    return 0;
}

```

这样得到的结果，是两个完全一致的整数，那么我们有理由相信，仅给出二维数组的一个下标时，实际上是这一行第一个元素的地址。

实验二：对其赋值：

```c
#include <stdio.h>

int main(void)
{
    int a[100][100]={0};
    *a[5] = 233;
    printf("%d\n",a[5][0]);
    return 0;
}
```

结果：输出`233`。故可以认定，猜想成立。


结论：当二维数组仅给出一个下标时，实际上是这一行第一个元素的地址。该性质可以用于使用一个二维数组存储多条字符串，也可用于其他需要使用指针的场景中。

